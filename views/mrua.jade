html.no-js(lang='en')
  head
    title= Fisica
    link(rel='stylesheet', href='/stylesheets/style.css')
    script(type='text/javascript', src='jqwery/jquery-2.1.1.min.js')
    script(type='text/javascript', src='javascripts/calcula.js')
    link(rel='stylesheet', href='bootstrap-3.1.1-dist/css/bootstrap.min.css')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    script.
      function rango(){
        var fog=document.formulito.distancia.value;
        var i,j=0,k=0,x=1,auxf=1,auxi,auxic,funcion,contadorA=0,contadorC=0,contador1=0,contador2=0,cuantas=0,auxpal,auxconta2,contadeauxc2=0,stringaux;
        var anidadas=[];

        for(i=0;i<fog.length;i++){
            if((fog.charAt(i)=='A' && fog.charAt(i+1)=='R' && fog.charAt(i+2)=='C' && fog.charAt(i+4)=='S' && fog.charAt(i+5)=='E' && fog.charAt(i+6)=='N' && fog.charAt(i+8)=='H') || (fog.charAt(i)=='A' && fog.charAt(i+1)=='R' && fog.charAt(i+2)=='C' && fog.charAt(i+4)=='S' && fog.charAt(i+5)=='I' && fog.charAt(i+6)=='N' && fog.charAt(i+8)=='H')){
            //Hacer una vez más la función y buscar el if que valide i=1


              console.log('Entro al FOR');
              contadorA=0;
              j=0;
              while(j<fog.length){
                //Deberías poner un if que valide los paréntesis de una función y agregar otra variable que cuente si hay parentésis dentro de la función de la última anidada.
                //Deberías poner un entero, que valide el rango de un parentesis hasta otro.
                if(fog.charAt(j)=='(' && (/([A-Z])+/.test(fog.charAt(j-1)) || /([A-Z])+/.test(fog.charAt(j-2))))
                  contadorA++;
                j++;
                //console.log('Entro al While');
              }

              j=0;
              while(j<fog.length){
                if(fog.charAt(j)=='(' && (/([A-Z])+/.test(fog.charAt(j-1)) || /([A-Z])+/.test(fog.charAt(j-2))))
                  contador1++;
                j++;
                if(contador1==contadorA)
                  break;
                //console.log('Entro al While');
              }
              contador2=j;
              contadorC=contadorA;
              j=i+10;

              //Si no es una función anidada
              if(contadorA==1){
                if(fog.charAt(j+2)!=NaN){
                  anidadas[contadorA]=Math.asinh(fog.charAt(j+2));
                }
              }

              //Para validar el lugar deberías poner un IF que valide el último paréntesis que abre y el último que cierra.
              do{
              //console.log('Entro al Do While');
                //
                //Hiper inv.
                if((fog.charAt(j)=='A' && fog.charAt(j+1)=='R' && fog.charAt(j+2)=='C' && fog.charAt(j+4)=='S' && fog.charAt(j+5)=='E' && fog.charAt(j+6)=='N' && fog.charAt(j+8)=='H' && fog.charAt(j-1)=='(' ) || (fog.charAt(j)=='A' && fog.charAt(j+1)=='R' && fog.charAt(j+2)=='C' && fog.charAt(j+4)=='S' && fog.charAt(j+5)=='I' && fog.charAt(j+6)=='N' && fog.charAt(j+8)=='H' && fog.charAt(j-1)=='(' )){
                //console.log('Entro al 1er IF');
                  
                  //Aquí debe ir el for del rango 1 al rango 2 y debe igualarse anidadas[contador] al otro arrreglo
                  if(contadorC==contadorA){
                    cuantas++;
                    console.log('Cuantas= '+cuantas);
                    auxconta2=contador2;
                    //Aqui se le puede poner un if para validar el numero de paréntesis.
                    while(fog.charAt(auxconta2)!=')'){
                      auxconta2++;
                    }
                    //console.log('contador2= '+contador2+' auxconta='+auxconta2);
                    stringaux=fog.slice(contador2,auxconta2);
                    //console.log('String ='+stringaux);
                    //console.log('Entro al 2do IF');
                    //console.log('Char='+fog.charAt((contador2))+' Numero='+contador2);
                    if(contador2!=1)
                      anidadas[contadorC]=Math.asinh(parseFloat(stringaux));
                    //console.log('anidadas['+contadorC+']='+anidadas[contadorC]);
                    //console.log('[i]='+contadorC);  
                  }
                }
                if((fog.charAt(j)=='A' && fog.charAt(j+1)=='R' && fog.charAt(j+2)=='C' && fog.charAt(j+4)=='C' && fog.charAt(j+5)=='O' && fog.charAt(j+6)=='S' && fog.charAt(j+8)=='H' && fog.charAt(j-1)=='(' ) ){
                  if(contadorC==contadorA){
                    cuantas++;
                    console.log('Cuantas= '+cuantas);
                    auxconta2=contador2;
                    //Aqui se le puede poner un if para validar el numero de paréntesis.
                    while(fog.charAt(auxconta2)!=')'){
                      auxconta2++;
                    }
                    //console.log('contador2= '+contador2+' auxconta='+auxconta2);
                    stringaux=fog.slice(contador2,auxconta2);
                    //console.log('String ='+stringaux);
                    //console.log('Entro al 2do IF');
                    //console.log('Char='+fog.charAt((contador2))+' Numero='+contador2);
                    if(contador2!=1)
                      anidadas[contadorC]=Math.acosh(parseFloat(stringaux));
                    //console.log('anidadas['+contadorC+']='+anidadas[contadorC]);
                    //console.log('[i]='+contadorC);  
                  }
                }

                if((fog.charAt(j)=='A' && fog.charAt(j+1)=='R' && fog.charAt(j+2)=='C' && fog.charAt(j+4)=='T' && fog.charAt(j+5)=='A' && fog.charAt(j+6)=='N' && fog.charAt(j+8)=='H' && fog.charAt(j-1)=='(' )){
                  if(contadorC==contadorA){
                    cuantas++;
                    console.log('Cuantas= '+cuantas);
                    auxconta2=contador2;
                    //Aqui se le puede poner un if para validar el numero de paréntesis.
                    while(fog.charAt(auxconta2)!=')'){
                      auxconta2++;
                    }
                    //console.log('contador2= '+contador2+' auxconta='+auxconta2);
                    stringaux=fog.slice(contador2,auxconta2);
                    //console.log('String ='+stringaux);
                    //console.log('Entro al 2do IF');
                    //console.log('Char='+fog.charAt((contador2))+' Numero='+contador2);
                    if(contador2!=1)
                      anidadas[contadorC]=Math.atanh(parseFloat(stringaux));
                    //console.log('anidadas['+contadorC+']='+anidadas[contadorC]);
                    //console.log('[i]='+contadorC);  
                  }
                }

                if((fog.charAt(j)=='A' && fog.charAt(j+1)=='R' && fog.charAt(j+2)=='C' && fog.charAt(j+4)=='C' && fog.charAt(j+5)=='O' && fog.charAt(j+6)=='T' && fog.charAt(j+8)=='H' && fog.charAt(j-1)=='(' ) || (fog.charAt(j)=='A' && fog.charAt(j+1)=='R' && fog.charAt(j+2)=='C' && fog.charAt(j+4)=='C' && fog.charAt(j+5)=='T' && fog.charAt(j+6)=='G' && fog.charAt(j+8)=='H' && fog.charAt(j-1)=='(' )){
                  if(contadorC==contadorA){
                    cuantas++;
                    console.log('Cuantas= '+cuantas);
                    auxconta2=contador2;
                    //Aqui se le puede poner un if para validar el numero de paréntesis.
                    while(fog.charAt(auxconta2)!=')'){
                      auxconta2++;
                    }
                    //console.log('contador2= '+contador2+' auxconta='+auxconta2);
                    stringaux=fog.slice(contador2,auxconta2);
                    //console.log('String ='+stringaux);
                    //console.log('Entro al 2do IF');
                    //console.log('Char='+fog.charAt((contador2))+' Numero='+contador2);
                    if(contador2!=1)
                      anidadas[contadorC]=1/Math.atanh(parseFloat(stringaux));
                    //console.log('anidadas['+contadorC+']='+anidadas[contadorC]);
                    //console.log('[i]='+contadorC);  
                  }
                }
                if((fog.charAt(j)=='A' && fog.charAt(j+1)=='R' && fog.charAt(j+2)=='C' && fog.charAt(j+4)=='S' && fog.charAt(j+5)=='E' && fog.charAt(j+6)=='C' && fog.charAt(j+8)=='H' && fog.charAt(j-1)=='(' ) ){
                  if(contadorC==contadorA){
                    cuantas++;
                    console.log('Cuantas= '+cuantas);
                    auxconta2=contador2;
                    //Aqui se le puede poner un if para validar el numero de paréntesis.
                    while(fog.charAt(auxconta2)!=')'){
                      auxconta2++;
                    }
                    //console.log('contador2= '+contador2+' auxconta='+auxconta2);
                    stringaux=fog.slice(contador2,auxconta2);
                    //console.log('String ='+stringaux);
                    //console.log('Entro al 2do IF');
                    //console.log('Char='+fog.charAt((contador2))+' Numero='+contador2);
                    if(contador2!=1)
                      anidadas[contadorC]=1/Math.acosh(parseFloat(stringaux));
                    //console.log('anidadas['+contadorC+']='+anidadas[contadorC]);
                    //console.log('[i]='+contadorC);  
                  }
                }
                if((fog.charAt(j)=='A' && fog.charAt(j+1)=='R' && fog.charAt(j+2)=='C' && fog.charAt(j+4)=='C' && fog.charAt(j+5)=='S' && fog.charAt(j+6)=='C' && fog.charAt(j+8)=='H' && fog.charAt(j-1)=='(' ) ){
                  if(contadorC==contadorA){
                    cuantas++;
                    console.log('Cuantas= '+cuantas);
                    auxconta2=contador2;
                    //Aqui se le puede poner un if para validar el numero de paréntesis.
                    while(fog.charAt(auxconta2)!=')'){
                      auxconta2++;
                    }
                    //console.log('contador2= '+contador2+' auxconta='+auxconta2);
                    stringaux=fog.slice(contador2,auxconta2);
                    //console.log('String ='+stringaux);
                    //console.log('Entro al 2do IF');
                    //console.log('Char='+fog.charAt((contador2))+' Numero='+contador2);
                    if(contador2!=1)
                      anidadas[contadorC]=1/Math.asinh(parseFloat(stringaux));
                    //console.log('anidadas['+contadorC+']='+anidadas[contadorC]);
                    //console.log('[i]='+contadorC);  
                  }
                }

              //console.log('Contador='+contadorC);

                

               // console.log('j'+j+'[j]='+fog.charAt(j));
                if(fog.charAt(j)==')'){
                  console.log('ENTRO EN EL IF');
                    contadorC--; 
                }   
                j++;

              if(contadorC!=contadorA && contadorC!=1){
                    auxpal=contador2;
                    auxpal-=20;
                    auxi=auxpal;
                    console.log('Auxi='+auxi);

                    //Hip Inv.
                    if((fog.charAt(auxi)=='A' && fog.charAt(auxi+1)=='R' && fog.charAt(auxi+2)=='C' && fog.charAt(auxi+4)=='S' && fog.charAt(auxi+5)=='E' && fog.charAt(auxi+6)=='N' && fog.charAt(auxi+8)=='H' && (fog.charAt(auxi-2)=='(' ||  fog.charAt(auxi-1)=='(') ) || (fog.charAt(auxi)=='A' && fog.charAt(auxi+1)=='R' && fog.charAt(auxi+2)=='C' && fog.charAt(auxi+4)=='S' && fog.charAt(auxi+5)=='I' && fog.charAt(auxi+6)=='N' && fog.charAt(auxi+8)=='H' && (fog.charAt(auxi-2)=='(' || fog.charAt(auxi-1)=='(') )){
                      cuantas++;
                      // console.log('Cuantas= '+cuantas);
                      auxic=contadorC+1;
                      /*for(i=0;i<anidadas.length;i++){
                        console.log('Arreglo['+i+']='+anidadas[i]);
                      }*/
                      console.log('Ani['+contadorC+']='+anidadas[contadorC]);
                      anidadas[contadorC]=Math.asinh(anidadas[auxic]);
                      //console.log('contadorC+1='+auxic);
                      console.log('Arc sen h='+anidadas[auxic]);
                    }
                    if((fog.charAt(auxi)=='A' && fog.charAt(auxi+1)=='R' && fog.charAt(auxi+2)=='C' && fog.charAt(auxi+4)=='C' && fog.charAt(auxi+5)=='O' && fog.charAt(auxi+6)=='S' && fog.charAt(auxi+8)=='H' && (fog.charAt(auxi-2)=='(' ||  fog.charAt(auxi-1)=='(') )){
                     cuantas++;
                     //console.log('Cuantas= '+cuantas);
                      auxic=contadorC+1;
                      console.log('Ani['+contadorC+']='+anidadas[contadorC]);
                      anidadas[contadorC]=Math.acosh(anidadas[auxic]);
                      //console.log('contadorC+1='+auxic);
                      console.log('Arc cos h='+anidadas[auxic]);
                    }
                    if((fog.charAt(auxi)=='A' && fog.charAt(auxi+1)=='R' && fog.charAt(auxi+2)=='C' && fog.charAt(auxi+4)=='T' && fog.charAt(auxi+5)=='A' && fog.charAt(auxi+6)=='N' && fog.charAt(auxi+8)=='H' && (fog.charAt(auxi-2)=='(' ||  fog.charAt(auxi-1)=='(') )){
                     cuantas++;
                     //console.log('Cuantas= '+cuantas);
                      auxic=contadorC+1;
                      console.log('Ani['+contadorC+']='+anidadas[contadorC]);
                      anidadas[contadorC]=Math.atanh(anidadas[auxic]);
                      //console.log('contadorC+1='+auxic);
                      console.log('Arc tan h='+anidadas[auxic]);
                    }
                    if((fog.charAt(auxi)=='A' && fog.charAt(auxi+1)=='R' && fog.charAt(auxi+2)=='C' && fog.charAt(auxi+4)=='C' && fog.charAt(auxi+5)=='O' && fog.charAt(auxi+6)=='T' && fog.charAt(auxi+8)=='H' && (fog.charAt(auxi-2)=='(' ||  fog.charAt(auxi-1)=='(') ) || (fog.charAt(auxi)=='A' && fog.charAt(auxi+1)=='R' && fog.charAt(auxi+2)=='C' && fog.charAt(auxi+4)=='C' && fog.charAt(auxi+5)=='T' && fog.charAt(auxi+6)=='G' && fog.charAt(auxi+8)=='H' && (fog.charAt(auxi-2)=='(' || fog.charAt(auxi-1)=='(') )){
                     cuantas++;
                     //console.log('Cuantas= '+cuantas);
                      auxic=contadorC+1;
                      console.log('Ani['+contadorC+']='+anidadas[contadorC]);
                      anidadas[contadorC]=1/Math.atanh(anidadas[auxic]);
                      //console.log('contadorC+1='+auxic);
                      console.log('Arc cot h='+anidadas[auxic]);
                    }
                    if((fog.charAt(auxi)=='A' && fog.charAt(auxi+1)=='R' && fog.charAt(auxi+2)=='C' && fog.charAt(auxi+4)=='S' && fog.charAt(auxi+5)=='E' && fog.charAt(auxi+6)=='C' && fog.charAt(auxi+8)=='H' && (fog.charAt(auxi-2)=='(' ||  fog.charAt(auxi-1)=='(') )){
                     cuantas++;
                     //console.log('Cuantas= '+cuantas);
                      auxic=contadorC+1;
                      console.log('Ani['+contadorC+']='+anidadas[contadorC]);
                      anidadas[contadorC]=1/Math.acosh(anidadas[auxic]);
                      //console.log('contadorC+1='+auxic);
                      console.log('Arc sec h='+anidadas[auxic]);
                    }
                    if((fog.charAt(auxi)=='A' && fog.charAt(auxi+1)=='R' && fog.charAt(auxi+2)=='C' && fog.charAt(auxi+4)=='C' && fog.charAt(auxi+5)=='S' && fog.charAt(auxi+6)=='C' && fog.charAt(auxi+8)=='H' && (fog.charAt(auxi-2)=='(' ||  fog.charAt(auxi-1)=='(') )){
                     cuantas++;
                     //console.log('Cuantas= '+cuantas);
                      auxic=contadorC+1;
                      console.log('Ani['+contadorC+']='+anidadas[contadorC]);
                      anidadas[contadorC]=1/Math.asenh(anidadas[auxic]);
                      //console.log('contadorC+1='+auxic);
                      console.log('Arc csc h='+anidadas[auxic]);
                    }
              } 

              }while(contadorC>1);
            anidadas[1]=Math.asinh(anidadas[2]);
            }
          
        }

        for(j=0;j<anidadas.length;j++){
          console.log('Anidadas['+j+']='+anidadas[j]);
        }
        
        //console.log('AniF='+anidadas[contadorC]);
        funcion=anidadas[1];
        document.formulito.fog.value=funcion;
      }
  body(bgcolor='#02D5C3')
    script.
      var ms = new MathSolver();
      var variable=ms.infixToPostfix("ARCSENH(COS(2))");
      //Bien -2 3 1 ^ ^ ^ E 4 2 ^ - 
      //Mal - 2 3 1 ^ ^ ^ 4 2 ^ - E 
      console.log("Logaritmo="+logaritmo(3,9));
      console.log("Expresion: "+variable);
      console.log("Resultado:"+resolver(variable,2));
    #titulo
      h1 Cálculo
      p Martinez San Roman Aaron Hazel
      h1 Composición de funciones
        p(align='left')      
          form#formulito(role='form', name='formulito')
            .form-group
              p 
                label Función f(x):
              p
                .col-sm-4
                  input#distancia.form-control(type='text',name='distancia')
            .form-group
              br
              p
                label Función g(x):
              p
                .col-sm-4
                  input#tiempo.form-control(type='text', name='tiempo', value='ARC SEN H(ARC SEN H(ARC SEN H(ARC TAN H(0.7))))')
            br
            .form-group
              .col-sm-offset-2.col-sm-4
                button.btn.btn-primary(type='button', onclick='rango()') Enviar
            br
            br
            br
            .form-group
              p 
                label.control-label.col-sm-2(for='fog') (f o g)(x)=
                .col-sm-4
                  input#fog.form-control(name='fog' type='text', readonly)
                .grisesito
            .form-group
              p 
                label.control-label.col-sm-2(for='gof') (g o f)(x)=
                .col-sm-4
                  input#gof.form-control(name='gof' type='text', readonly)
                .grisesito 
            br
            br
            .form-group  
              p
                label Rango:
              p
                .col-sm-4
                  | De:
                  input#rango1.form-control(type='number', name='rango1')
              p
                .col-sm-4
                  | Hasta:
                  input#rango2.form-control(type='number', name='rango2')
              .col-sm-offset-2.col-sm-4
                button.btn.btn-primary(type='button', onclick='rango("rango1","rango2")') Enviar 
            br
            br
      footer
        ul
          li
            a(href='/') MRU
          li
            a(href='/mrua') MRUA
          li
            a(href='/') Cinemática